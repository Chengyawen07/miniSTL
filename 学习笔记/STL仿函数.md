# **ğŸ“Œ STL ä»¿å‡½æ•°ï¼ˆFunctorsï¼‰è¯¦è§£**

**ä»¿å‡½æ•°ï¼ˆFunctorï¼‰** å…¶å®å°±æ˜¯ **ä¸€ä¸ªåƒå‡½æ•°ä¸€æ ·èƒ½è¢«è°ƒç”¨çš„å¯¹è±¡**ã€‚å®ƒçš„æœ¬è´¨æ˜¯**ä¸€ä¸ªé‡è½½äº† `operator()` çš„ç±»**ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°ä¸€æ ·ä½¿ç”¨ï¼Œä½†æ¯”æ™®é€šå‡½æ•°æ›´å¼ºå¤§ï¼Œå› ä¸ºå®ƒå¯ä»¥**å­˜å‚¨çŠ¶æ€**ã€‚

------

## **1ï¸âƒ£ ä»€ä¹ˆæ˜¯ä»¿å‡½æ•°ï¼Ÿ**

ğŸ“Œ **ä»¿å‡½æ•°ï¼ˆFunctorsï¼‰= é‡è½½ `operator()` çš„ç±»**

- **æ™®é€šå‡½æ•°** åªèƒ½è°ƒç”¨ï¼Œä¸èƒ½ä¿å­˜çŠ¶æ€ã€‚
- **ä»¿å‡½æ•°** æ˜¯**ä¸€ä¸ªç±»å¯¹è±¡**ï¼Œé€šè¿‡ **é‡è½½ `operator()`** è®©å®ƒåƒå‡½æ•°ä¸€æ ·ä½¿ç”¨ã€‚
- <u>**ä»¿å‡½æ•°æ¯”æ™®é€šå‡½æ•°æ›´çµæ´»**ï¼Œå¯ä»¥ä½œä¸º STL ç®—æ³•çš„å›è°ƒå‡½æ•°ï¼Œæˆ–è€…å­˜å‚¨çŠ¶æ€ã€‚</u>

ğŸ“Œ **ç®€å•ç†è§£**

- æ™®é€šå‡½æ•°ï¼šåªèƒ½**æ‰§è¡Œé€»è¾‘**ï¼Œä¸èƒ½ä¿å­˜çŠ¶æ€ã€‚
- ä»¿å‡½æ•°ï¼ˆFunctorï¼‰ï¼š**å¯ä»¥æ‰§è¡Œé€»è¾‘ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨çŠ¶æ€**ï¼Œå¹¶ä¸”èƒ½è¢«å¤šæ¬¡è°ƒç”¨ã€‚

âœ… **ç¤ºä¾‹ï¼šå®šä¹‰ä¸€ä¸ªä»¿å‡½æ•°**

```cpp
#include <iostream>
using namespace std;

// å®šä¹‰ä»¿å‡½æ•°ï¼ˆFunctorï¼‰
class Add {
public:
    int operator()(int a, int b) {  
        return a + b;
    }
};

int main() {
    Add add;  // åˆ›å»ºå¯¹è±¡
    cout << add(3, 5) << endl;  // åƒå‡½æ•°ä¸€æ ·è°ƒç”¨ï¼Œè¾“å‡º 8
    return 0;
}
```

ğŸ“Œ **åˆ†æ**

- `class Add` **é‡è½½ `operator()`**ï¼Œä½¿å¯¹è±¡ `add` å¯ä»¥åƒ `add(3,5)` è¿™æ ·è°ƒç”¨ã€‚
- **æœ¬è´¨ï¼šä»¿å‡½æ•°æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼ˆCallable Objectï¼‰ã€‚**

------



## **2ï¸âƒ£ ä»¿å‡½æ•°çš„ä¸»è¦ä½œç”¨**

ğŸ“Œ **STL ä¸­çš„ä¸»è¦ç”¨é€”**

1. **ä½œä¸ºç®—æ³•çš„æ¯”è¾ƒå‡½æ•°**ï¼ˆå¦‚ `sort()`ã€`set` è‡ªå®šä¹‰æ’åºï¼‰
2. **å­˜å‚¨çŠ¶æ€**ï¼ˆæ¯”æ™®é€šå‡½æ•°æ›´å¼ºï¼‰
3. **ç»“åˆ STL ç®—æ³•ï¼ˆ`for_each()`ã€`transform()`ï¼‰**
4. **é€‚ç”¨äº `function<>` ä½œä¸ºå›è°ƒå‡½æ•°**

âœ… **ç¤ºä¾‹ï¼šä½œä¸º STL ç®—æ³•çš„å›è°ƒ**

ğŸ“Œ **ä»¿å‡½æ•°æœ€å¸¸ç”¨äº STL ç®—æ³•ï¼Œæ¯”å¦‚ `sort()`ã€`for_each()`**

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

// é™åºæ’åºçš„ä»¿å‡½æ•°
class Descending {
public:
    bool operator()(int a, int b) {
        return a > b;  // é™åºæ’åº
    }
};

int main() {
    vector<int> v = {5, 2, 8, 1, 3};
    
    sort(v.begin(), v.end(), Descending());  // ä½¿ç”¨ä»¿å‡½æ•°æ’åº

    for (int n : v) cout << n << " ";  // è¾“å‡º: 8 5 3 2 1
    return 0;
}

```

ğŸ“Œ **åˆ†æ**

- `Descending` **æ˜¯ä¸€ä¸ªä»¿å‡½æ•°ï¼Œä½œä¸º `sort()` çš„æ¯”è¾ƒå‡½æ•°**ï¼Œå®ç°**é™åºæ’åº**ã€‚

------



## **3ï¸âƒ£ STL å†…ç½®çš„ä»¿å‡½æ•°**

STL æä¾›äº†ä¸€äº›**å¸¸ç”¨çš„ä»¿å‡½æ•°**ï¼Œä½äº `<functional>` å¤´æ–‡ä»¶ï¼š

| **ç±»åˆ«**     | **ä»¿å‡½æ•°**         | **ä½œç”¨** |
| ------------ | ------------------ | -------- |
| **ç®—æœ¯è¿ç®—** | `plus<T>`          | `a + b`  |
|              | `minus<T>`         | `a - b`  |
|              | `multiplies<T>`    | `a * b`  |
|              | `divides<T>`       | `a / b`  |
|              | `modulus<T>`       | `a % b`  |
| **æ¯”è¾ƒè¿ç®—** | `greater<T>`       | `a > b`  |
|              | `less<T>`          | `a < b`  |
|              | `greater_equal<T>` | `a >= b` |
|              | `less_equal<T>`    | `a <= b` |
|              | `equal_to<T>`      | `a == b` |
|              | `not_equal_to<T>`  | `a != b` |
| **é€»è¾‘è¿ç®—** | `logical_and<T>`   | `a && b` |
|              | `logical_or<T>`    | `a       |
|              | `logical_not<T>`   | `!a`     |

âœ… **ç¤ºä¾‹ï¼šä½¿ç”¨ STL ä»¿å‡½æ•° `greater<>` è¿›è¡Œé™åºæ’åº**

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#include <functional>  // å¼•å…¥ä»¿å‡½æ•°åº“
using namespace std;

int main() {
    vector<int> v = {5, 2, 8, 1, 3};
    sort(v.begin(), v.end(), greater<int>());  // ä½¿ç”¨ STL å†…ç½®ä»¿å‡½æ•°

    for (int n : v) cout << n << " ";  // è¾“å‡º: 8 5 3 2 1
    return 0;
}
```

ğŸ“Œ **`greater<int>()` ä»£æ›¿äº†è‡ªå®šä¹‰ä»¿å‡½æ•°ï¼Œç®€æ´é«˜æ•ˆï¼**

------



## **4ï¸âƒ£ ä»¿å‡½æ•°å­˜å‚¨çŠ¶æ€**

ğŸ“Œ **æ™®é€šå‡½æ•°ä¸èƒ½å­˜å‚¨çŠ¶æ€ï¼Œä½†ä»¿å‡½æ•°å¯ä»¥ï¼**

```cpp
#include <iostream>
using namespace std;

class Counter {
private:
    int count;
public:
    Counter() : count(0) {}  
    int operator()(int x) {  
        count += x;
        return count;
    }
};

int main() {
    Counter c;
    cout << c(3) << endl;  // è¾“å‡º 3
    cout << c(5) << endl;  // è¾“å‡º 8
    cout << c(2) << endl;  // è¾“å‡º 10
    return 0;
}
```

ğŸ“Œ **`Counter` ç»´æŠ¤ `count` å˜é‡ï¼Œæ¯æ¬¡è°ƒç”¨ `operator()` éƒ½ä¼šç´¯åŠ ï¼** âœ… **ç›¸æ¯”äºæ™®é€šå‡½æ•°ï¼Œä»¿å‡½æ•°å¯ä»¥å­˜å‚¨çŠ¶æ€ï¼Œæé«˜çµæ´»æ€§ï¼**

------



## **5ï¸âƒ£ STL ç®—æ³•ä¸ä»¿å‡½æ•°ç»“åˆ**

ğŸ“Œ **`for_each()` ä½¿ç”¨ä»¿å‡½æ•°**

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

class Print {
public:
    void operator()(int x) {
        cout << x << " ";
    }
};

int main() {
    vector<int> v = {1, 2, 3, 4, 5};
    for_each(v.begin(), v.end(), Print());  // ä¼ å…¥ä»¿å‡½æ•°
    return 0;
}
```

ğŸ“Œ **åˆ†æ**

- `for_each()` **éå† `vector`ï¼Œå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œ `Print()`**ã€‚
- **ä»¿å‡½æ•°å¯ä»¥å­˜çŠ¶æ€ï¼Œä½¿ `for_each()` æ›´å¼ºå¤§ï¼**

------



## **6ï¸âƒ£ Lambda vs. ä»¿å‡½æ•°**

ğŸ“Œ **C++11 ä¹‹åï¼ŒLambda å‡½æ•°æ¯”ä»¿å‡½æ•°æ›´ç®€æ´** âœ… **Lambda æ›¿ä»£ä»¿å‡½æ•°**

```cpp
for_each(v.begin(), v.end(), [](int x) { cout << x << " "; });
```

ğŸ“Œ **ä½•æ—¶ç”¨ Lambdaï¼Œä½•æ—¶ç”¨ä»¿å‡½æ•°ï¼Ÿ**

| **æ–¹å¼**   | **ä¼˜ç‚¹**                     | **ç¼ºç‚¹**           |
| ---------- | ---------------------------- | ------------------ |
| **ä»¿å‡½æ•°** | **å¯å­˜å‚¨çŠ¶æ€ï¼Œå¯å¤ç”¨**       | ä»£ç è¾ƒé•¿ï¼Œéœ€å®šä¹‰ç±» |
| **Lambda** | **è¯­æ³•ç®€æ´ï¼Œé€‚ç”¨äºç®€å•æ“ä½œ** | ä¸èƒ½å­˜å‚¨çŠ¶æ€       |

**ğŸ’¡ ç»“è®ºï¼š**

- **ç®€å•æ“ä½œ â†’ Lambda**
- **éœ€è¦å­˜çŠ¶æ€ â†’ ä»¿å‡½æ•°**

------



## **ğŸ“Œ æ€»ç»“**

1ï¸âƒ£ **ä»¿å‡½æ•°æ˜¯é‡è½½ `operator()` çš„ç±»ï¼Œå¯ä»¥åƒå‡½æ•°ä¸€æ ·è°ƒç”¨ã€‚**
 2ï¸âƒ£ **ç›¸æ¯”æ™®é€šå‡½æ•°ï¼Œä»¿å‡½æ•°å¯ä»¥å­˜å‚¨çŠ¶æ€ï¼Œæ›´çµæ´»ã€‚**
 3ï¸âƒ£ **ä»¿å‡½æ•°åœ¨ STL ä¸­ä¸»è¦ç”¨äºè‡ªå®šä¹‰æ’åºã€`for_each()`ã€`transform()` ç­‰ç®—æ³•ã€‚**
 4ï¸âƒ£ **STL æä¾›å†…ç½®ä»¿å‡½æ•°ï¼Œå¦‚ `greater<>`, `less<>`, `plus<>`ï¼Œç®€åŒ–ä»£ç ã€‚**
 5ï¸âƒ£ **C++11 ä¹‹åï¼ŒLambda è¯­æ³•ç®€æ´ï¼Œé€‚ç”¨äºç®€å•æ“ä½œï¼Œä½†ä»¿å‡½æ•°æ›´é€‚ç”¨äºå­˜å‚¨çŠ¶æ€çš„æƒ…å†µã€‚**

ğŸ’¡ **è®°ä½**ï¼š**ä»¿å‡½æ•° = å¸¦çŠ¶æ€çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œèƒ½æå‡ STL ç®—æ³•çš„çµæ´»æ€§ï¼** ğŸš€



