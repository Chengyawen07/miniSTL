## **C++ STL é«˜çº§å®¹å™¨è§£æï¼š`multiset`ã€`multimap`ã€`unordered_multiset`ã€`unordered_multimap`**

------

è¿™äº›å®¹å™¨æ˜¯ **å…³è”å¼å®¹å™¨ï¼ˆAssociative Containersï¼‰** çš„æ‰©å±•ï¼Œä¸»è¦ç‰¹ç‚¹æ˜¯ï¼š

- **å…è®¸é‡å¤é”®ï¼ˆMultiple Keysï¼‰**
- **æä¾›é«˜æ•ˆæŸ¥æ‰¾**
- `unordered_` ç‰ˆæœ¬ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œ`set/map` ç‰ˆæœ¬ä½¿ç”¨çº¢é»‘æ ‘ï¼ˆRB-Treeï¼‰ã€‚

ä¸‹é¢ï¼Œæˆ‘ä»¬é€ä¸ªè§£æå®ƒä»¬çš„**ç”¨é€”ã€ç‰¹ç‚¹ã€å¸¸è§æ“ä½œ**ï¼Œå¹¶é™„ä¸Š**ä»£ç ç¤ºä¾‹**ã€‚

------

## **1ï¸âƒ£ `multiset`ï¼ˆå…è®¸é‡å¤å…ƒç´ çš„æœ‰åºé›†åˆï¼‰**

### âœ… **ç”¨é€”**

- **å­˜å‚¨æœ‰åºé›†åˆ**ï¼Œ**å…è®¸é‡å¤å…ƒç´ **ï¼ˆä¸ `set` çš„åŒºåˆ«ï¼‰ã€‚
- **é€‚ç”¨äºç»Ÿè®¡é‡å¤å…ƒç´ çš„æƒ…å†µ**ï¼Œå¦‚å­˜å‚¨è€ƒè¯•æˆç»©ã€å•è¯é¢‘ç‡ç­‰ã€‚

### ğŸ”¹ **ä¸»è¦ç‰¹ç‚¹**

| ç‰¹æ€§               | `set`      | `multiset` |
| ------------------ | ---------- | ---------- |
| **æ˜¯å¦å…è®¸é‡å¤å€¼** | âŒ å¦       | âœ… å…è®¸     |
| **é»˜è®¤æ’åºæ–¹å¼**   | âœ… ä»å°åˆ°å¤§ | âœ… ä»å°åˆ°å¤§ |
| **æŸ¥æ‰¾æ•ˆç‡**       | `O(log n)` | `O(log n)` |

### ğŸ”¹ **å¸¸è§æ“ä½œ**

| æ“ä½œ         | è¯­æ³•                                               |
| ------------ | -------------------------------------------------- |
| æ’å…¥         | `mset.insert(val);`                                |
| åˆ é™¤         | `mset.erase(val);`ï¼ˆåˆ é™¤æ‰€æœ‰åŒ¹é…é¡¹ï¼‰               |
| ç»Ÿè®¡å…ƒç´ ä¸ªæ•° | `mset.count(val);`                                 |
| æŸ¥æ‰¾         | `mset.find(val);`                                  |
| èŒƒå›´æŸ¥æ‰¾     | `mset.lower_bound(val);`ã€`mset.upper_bound(val);` |

### ğŸ”¹ **ç¤ºä¾‹ä»£ç **

```cpp
#include <iostream>
#include <set>

int main() {
    std::multiset<int> mset = {10, 20, 20, 30, 30, 30};

    mset.insert(20);  // æ’å…¥ 20
    mset.erase(30);   // åˆ é™¤æ‰€æœ‰ 30

    std::cout << "20 çš„ä¸ªæ•°: " << mset.count(20) << std::endl; // è¾“å‡º 3

    for (int num : mset) {
        std::cout << num << " ";  // è¾“å‡º: 10 20 20 20
    }

    return 0;
}
```

------



## **2ï¸âƒ£ `multimap`ï¼ˆå…è®¸é‡å¤é”®çš„æœ‰åºæ˜ å°„ï¼‰**

### âœ… **ç”¨é€”**

- **å­˜å‚¨é”®å€¼å¯¹ï¼ˆKey-Valueï¼‰ï¼Œä½†å…è®¸é‡å¤é”®**ã€‚
- é€‚ç”¨äºå­˜å‚¨ä¸€ä¸ªé”®å¯¹åº”å¤šä¸ªå€¼çš„æƒ…å†µï¼Œä¾‹å¦‚ï¼š
  - **å­¦ç”Ÿå’Œå¤šä¸ªè€ƒè¯•æˆç»©**
  - **å…¬å¸å’Œå¤šä¸ªé›‡å‘˜**

### ğŸ”¹ **ä¸»è¦ç‰¹ç‚¹**

| ç‰¹æ€§               | `map`         | `multimap`    |
| ------------------ | ------------- | ------------- |
| **æ˜¯å¦å…è®¸é‡å¤é”®** | âŒ å¦          | âœ… å…è®¸        |
| **é»˜è®¤æ’åºæ–¹å¼**   | âœ… æŒ‰ key æ’åº | âœ… æŒ‰ key æ’åº |
| **æŸ¥æ‰¾æ•ˆç‡**       | `O(log n)`    | `O(log n)`    |

### ğŸ”¹ **å¸¸è§æ“ä½œ**

| æ“ä½œ                  | è¯­æ³•                                          |
| --------------------- | --------------------------------------------- |
| æ’å…¥                  | `mmap.insert({key, val});`                    |
| åˆ é™¤                  | `mmap.erase(key);`ï¼ˆåˆ é™¤æ‰€æœ‰ç›¸åŒ keyï¼‰        |
| æŸ¥æ‰¾                  | `mmap.find(key);`ï¼ˆè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„è¿­ä»£å™¨ï¼‰ |
| ç»Ÿè®¡æŸä¸ª key å‡ºç°æ¬¡æ•° | `mmap.count(key);`                            |

### ğŸ”¹ **ç¤ºä¾‹ä»£ç **

```cpp
#include <iostream>
#include <map>

int main() {
    std::multimap<std::string, int> mmap;

    mmap.insert({"Alice", 90});
    mmap.insert({"Alice", 85});
    mmap.insert({"Bob", 78});

    std::cout << "Alice çš„æˆç»©:" << std::endl;
    auto range = mmap.equal_range("Alice");
    for (auto it = range.first; it != range.second; ++it) {
        std::cout << it->second << " ";  // è¾“å‡º: 90 85
    }

    return 0;
}
```

------



## **3ï¸âƒ£ `unordered_multiset`ï¼ˆå…è®¸é‡å¤å…ƒç´ çš„æ— åºé›†åˆï¼‰**

### âœ… **ç”¨é€”**

- **å­˜å‚¨æ— åºé›†åˆ**ï¼Œä½†å…è®¸**é‡å¤å…ƒç´ **ã€‚
- é€‚ç”¨äº**ä¸éœ€è¦æ’åº**ï¼Œä½†**æŸ¥è¯¢éœ€è¦é«˜æ•ˆ**çš„æƒ…å†µã€‚

### ğŸ”¹ **ä¸»è¦ç‰¹ç‚¹**

| ç‰¹æ€§               | `unordered_set`      | `unordered_multiset` |
| ------------------ | -------------------- | -------------------- |
| **æ˜¯å¦å…è®¸é‡å¤å€¼** | âŒ å¦                 | âœ… å…è®¸               |
| **åº•å±‚æ•°æ®ç»“æ„**   | å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ | å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ |
| **æŸ¥æ‰¾æ•ˆç‡**       | `O(1)`               | `O(1)`               |
| **æ˜¯å¦æœ‰åº**       | âŒ æ— åº               | âŒ æ— åº               |

### ğŸ”¹ **å¸¸è§æ“ä½œ**

| æ“ä½œ         | è¯­æ³•                                  |
| ------------ | ------------------------------------- |
| æ’å…¥         | `umset.insert(val);`                  |
| åˆ é™¤         | `umset.erase(val);`ï¼ˆåˆ é™¤æ‰€æœ‰åŒ¹é…é¡¹ï¼‰ |
| ç»Ÿè®¡å…ƒç´ ä¸ªæ•° | `umset.count(val);`                   |
| æŸ¥æ‰¾         | `umset.find(val);`                    |

### ğŸ”¹ **ç¤ºä¾‹ä»£ç **

```cpp
#include <iostream>
#include <unordered_set>

int main() {
    std::unordered_multiset<int> umset = {10, 20, 20, 30, 30, 30};

    umset.insert(40);
    umset.erase(30);  // åˆ é™¤æ‰€æœ‰ 30

    std::cout << "20 çš„ä¸ªæ•°: " << umset.count(20) << std::endl; // è¾“å‡º 2

    for (int num : umset) {
        std::cout << num << " ";  // æ— åºè¾“å‡º
    }

    return 0;
}
```

------



## **4ï¸âƒ£ `unordered_multimap`ï¼ˆå…è®¸é‡å¤é”®çš„æ— åºæ˜ å°„ï¼‰**

### âœ… **ç”¨é€”**

- **å­˜å‚¨æ— åºé”®å€¼å¯¹ï¼ˆKey-Valueï¼‰ï¼Œå…è®¸é‡å¤é”®**ã€‚
- é€‚ç”¨äºé«˜æ•ˆæŸ¥è¯¢ï¼Œä½†ä¸éœ€è¦æ’åºçš„æƒ…å†µï¼Œå¦‚ï¼š
  - **æ ‡ç­¾åˆ†ç±»ï¼ˆä¸€ä¸ªæ ‡ç­¾å¯¹åº”å¤šä¸ªå†…å®¹ï¼‰**
  - **æ—¥å¿—ç³»ç»Ÿï¼ˆå¤šä¸ªç›¸åŒæ—¶é—´æˆ³çš„æ—¥å¿—è®°å½•ï¼‰**

### ğŸ”¹ **ä¸»è¦ç‰¹ç‚¹**

| ç‰¹æ€§               | `unordered_map`      | `unordered_multimap` |
| ------------------ | -------------------- | -------------------- |
| **æ˜¯å¦å…è®¸é‡å¤é”®** | âŒ å¦                 | âœ… å…è®¸               |
| **åº•å±‚æ•°æ®ç»“æ„**   | å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ | å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ |
| **æŸ¥æ‰¾æ•ˆç‡**       | `O(1)`               | `O(1)`               |
| **æ˜¯å¦æœ‰åº**       | âŒ æ— åº               | âŒ æ— åº               |

### ğŸ”¹ **å¸¸è§æ“ä½œ**

| æ“ä½œ                  | è¯­æ³•                        |
| --------------------- | --------------------------- |
| æ’å…¥                  | `ummap.insert({key, val});` |
| åˆ é™¤                  | `ummap.erase(key);`         |
| æŸ¥æ‰¾                  | `ummap.find(key);`          |
| ç»Ÿè®¡æŸä¸ª key å‡ºç°æ¬¡æ•° | `ummap.count(key);`         |

### ğŸ”¹ **ç¤ºä¾‹ä»£ç **

```cpp
#include <iostream>
#include <unordered_map>

int main() {
    std::unordered_multimap<std::string, int> ummap;

    ummap.insert({"Alice", 90});
    ummap.insert({"Alice", 85});
    ummap.insert({"Bob", 78});

    std::cout << "Alice çš„æˆç»©:" << std::endl;
    auto range = ummap.equal_range("Alice");
    for (auto it = range.first; it != range.second; ++it) {
        std::cout << it->second << " ";  // è¾“å‡º: 90 85 ï¼ˆæ— åºï¼‰
    }

    return 0;
}
```

------



## **æ€»ç»“**

| å®¹å™¨                 | æ˜¯å¦æœ‰åº | å…è®¸é‡å¤ | é€‚ç”¨åœºæ™¯         |
| -------------------- | -------- | -------- | ---------------- |
| `multiset`           | âœ… æœ‰åº   | âœ… å…è®¸   | ç»Ÿè®¡é‡å¤å…ƒç´      |
| `multimap`           | âœ… æœ‰åº   | âœ… å…è®¸   | å¤šå€¼æ˜ å°„         |
| `unordered_multiset` | âŒ æ— åº   | âœ… å…è®¸   | é«˜æ•ˆæŸ¥è¯¢é‡å¤å…ƒç´  |
| `unordered_multimap` | âŒ æ— åº   | âœ… å…è®¸   | é«˜æ•ˆæŸ¥è¯¢å¤šå€¼æ˜ å°„ |

- **é€‰æ‹©æ—¶ï¼šå¦‚æœä¸å…³å¿ƒé¡ºåºï¼Œä¼˜å…ˆä½¿ç”¨ `unordered_` ç‰ˆæœ¬ï¼Œæ•ˆç‡æ›´é«˜ï¼** 



## **PSï¼š çº¢é»‘æ ‘ vs. å“ˆå¸Œè¡¨ å¯¹æ¯”**

| **å¯¹æ¯”é¡¹**    | **çº¢é»‘æ ‘ï¼ˆRB-Treeï¼‰**                  | **å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰**                                   |
| ------------- | -------------------------------------- | ---------------------------------------------------------- |
| **å­˜å‚¨æ–¹å¼**  | **æœ‰åºå­˜å‚¨**ï¼ˆæŒ‰å¤§å°æ’åºï¼‰             | **æ— åºå­˜å‚¨**ï¼ˆå“ˆå¸Œç´¢å¼•ï¼‰                                   |
| **æŸ¥æ‰¾é€Ÿåº¦**  | `O(log n)`                             | **`O(1)`ï¼ˆæœ€ä¼˜ï¼‰ï¼Œ`O(n)`ï¼ˆæœ€åæƒ…å†µï¼‰**                     |
| **æ’å…¥/åˆ é™¤** | `O(log n)`ï¼Œè‡ªåŠ¨ä¿æŒå¹³è¡¡               | `O(1)`ï¼Œä½†æœ‰å“ˆå¸Œå†²çªæ—¶å¯èƒ½å˜æ…¢                             |
| **èŒƒå›´æŸ¥æ‰¾**  | âœ… **æ”¯æŒï¼ˆlower_bound, upper_boundï¼‰** | âŒ **ä¸æ”¯æŒèŒƒå›´æŸ¥æ‰¾**                                       |
| **å†…å­˜å ç”¨**  | **è¾ƒé«˜**ï¼ˆç»´æŠ¤å¹³è¡¡ç»“æ„ï¼‰               | **è¾ƒä½**ï¼ˆç›´æ¥æ˜ å°„åˆ°æ•°ç»„ï¼‰                                 |
| **é€‚ç”¨äº**    | **æœ‰åºå­˜å‚¨ã€èŒƒå›´æŸ¥æ‰¾**ï¼ˆ`set`ã€`map`ï¼‰ | **å¿«é€ŸæŸ¥æ‰¾ï¼Œæ— éœ€æ’åº**ï¼ˆ`unordered_set`ã€`unordered_map`ï¼‰ |